---
title: Fuse Test
---

<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/2.5.0/fuse.min.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css" />
    <style type="text/css" media="screen">
    .pageheader {
        background-color: #176DC2;
    }

    body {
        background-color: #FAFAFA;
    }
    </style>
</head>

<body>
    <div class="row">
        <div class="input-field col s8 push-s2 pull-s2 pageheader">
            <div class="center">
                <h5 class="center-align">
              Fuzzy Search Logic - By Jktress
            </h5>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="input-field col s8 push-s2 pull-s2">
            <div class="col s1">
                <label for="search">Search:</label>
            </div>
            <div class="col s7">
                <input placeholder="Search for a book" type="text" class="validate" id="search" name="search">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="input-field col s8 push-s2 pull-s2">
            <div id="resultset">
                <table id="result" class="responsive-table striped">
                    <tbody id="tablebody">
                        <tr>
                            <td>HELLO</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
<script>

document.addEventListener("DOMContentLoaded", function() {
  var data, tosearch, fuse, result;
  var request = new XMLHttpRequest();
  request.open('GET', '/books.json', true);

  request.onload = function() {
    if (this.status >= 200 && this.status < 400) {
      data = JSON.parse(this.response);
      console.log('data');
    } else {
      console.log('error');
    }
  };
  request.onerror = function() {
    // There was a connection error of some sort
    console.log('connection error');
  };

  request.send();

  // set up Fuse.js
  var input = document.getElementById("search");
  input.addEventListener('keyup', search);

  var options = {
      keys: ['title'],
      id: 'title'
  }

  function search(){
    tosearch = input.value;
    fuse = new Fuse(data, options);
    result = fuse.search(tosearch);
    populateResults();
  };

  function populateResults() {
    document.getElementById("tablebody").innerHTML = '';
    result.forEach(function(entry) {
      console.log(entry);
    });
    //var elements = document.querySelectorAll(selector);
    // result.forEach.call(elements, function(el, i){
    //   alert('hello');
    // });
  };

});
</script>

</html>
